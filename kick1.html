<!DOCTYPE html>
<html>
<body style="display:flex;align-items:center;justify-content:center;height:100vh;background:black;color:white;font-family:system-ui;">

<button id="knockBtn" style="height:80px;width:260px;border:1px solid white;background:transparent;color:white;font-size:18px;letter-spacing:2px;">
CLUNK KNOCK
</button>

<script>
let ctx;

function playKnock() {
  if (!ctx) ctx = new (window.AudioContext || window.webkitAudioContext)();
  if (ctx.state === "suspended") ctx.resume();

  const now = ctx.currentTime;

  // === IMPACT NOISE ===
  const bufferSize = ctx.sampleRate * 0.15;
  const noiseBuffer = ctx.createBuffer(1, bufferSize, ctx.sampleRate);
  const data = noiseBuffer.getChannelData(0);

  for (let i = 0; i < bufferSize; i++) {
    data[i] = (Math.random() * 2 - 1) * (1 - i / bufferSize);
  }

  const noise = ctx.createBufferSource();
  noise.buffer = noiseBuffer;

  const noiseFilter = ctx.createBiquadFilter();
  noiseFilter.type = "bandpass";
  noiseFilter.frequency.value = 900;
  noiseFilter.Q.value = 2;

  const noiseGain = ctx.createGain();
  noiseGain.gain.value = 1.0;

  noise.connect(noiseFilter);
  noiseFilter.connect(noiseGain);
  noiseGain.connect(ctx.destination);

  noise.start(now);
  noise.stop(now + 0.15);

  // === WOOD BODY (the clunk) ===
  const bodyOsc = ctx.createOscillator();
  const bodyGain = ctx.createGain();

  bodyOsc.type = "sine";
  bodyOsc.frequency.setValueAtTime(180, now);

  bodyGain.gain.setValueAtTime(1.4, now);
  bodyGain.gain.exponentialRampToValueAtTime(0.001, now + 0.25);

  bodyOsc.connect(bodyGain);
  bodyGain.connect(ctx.destination);

  bodyOsc.start(now);
  bodyOsc.stop(now + 0.26);
}

document.getElementById("knockBtn").addEventListener("click", playKnock);
</script>

</body>
</html>
